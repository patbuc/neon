// Integration test: Basic instance methods with impl blocks

// Expected:
// 3
// 4
// 25
// 5
// 6
// 8
// 100
// distance: 5

// Define a simple struct
struct Point {
    x
    y
}

// Define methods using impl block
impl Point {
    // Instance method - receives instance as `self`
    fn get_x(self) {
        return self.x
    }
    
    // Instance method with field access
    fn get_y(self) {
        return self.y
    }
    
    // Instance method with computation
    fn distance_squared(self) {
        return self.x * self.x + self.y * self.y
    }
    
    // Instance method with parameters
    fn distance_to(self, other) {
        val dx = other.x - self.x
        val dy = other.y - self.y
        return Math.sqrt(dx * dx + dy * dy)
    }
}

// Create instances
val p1 = Point(3, 4)
val p2 = Point(6, 8)

// Test basic field access via methods
print(p1.get_x())           // 3
print(p1.get_y())           // 4

// Test computation method
print(p1.distance_squared()) // 25 (3*3 + 4*4)

// Test method with parameters
print(p1.distance_to(p2))   // 5 (distance from (3,4) to (6,8) is 5)

// Test on second instance
print(p2.get_x())           // 6
print(p2.get_y())           // 8
print(p2.distance_squared()) // 100 (6*6 + 8*8)

// Method calling another method (using a regular function)
fn format_distance(a, b) {
    return "distance: " + a.distance_to(b).toString()
}
print(format_distance(p1, p2))  // "distance: 5"
